# Stage

Неформальное описание системы (сцены), по которой нужно будет построить архитектуру приложения/приложений


## Actors

Список всех действующих лиц:

- **Клиенты**, коты-тестировщики
- **Воркеры**, исполнители заказов, имееют свои характеристики (*сильные/слабые стороны*?), могу исполнять определенный тип услуг,
- **Менеджеры**, управляют услугами, назначают *наборы тестов?*, проверяют качество услуги воркеров, связываются с клинетами
- **Сотрудники отдела расходников**, обеспечивают воркеров "расходниками" для совершения заказа
- **Разработчики алгоритма,** те кто придумал алгоритм матчинга (сопоставление *услуг/ клиентов*? с воркером) [[Requirements#US-060|US-060]]
- **Кандидат в воркеры**, коты которые хотят стать воркерами подают заявку в систему на прохождение тестирования
- **Подрядчик**, привозит печеньки в отдел расходников
- *Сотрудники отдела качества?* (в тексте теже менеджеры [[Requirements#US-200|US-200]] [[Requirements#US-210|US-210]]), обрабатывают отмененные и провальные **заказы**, связываются с **клиентом**, заполняют **форму качества работы**


## Objects

Список всех объектов с которыми имеют дело Actors:

- Устройства, то что тестируют воркеры
- Услуги, имеется некий список услуг доступных для клиентов 
- Заказы, 
- *Задачи?, одно и тоже что и заказы? заказ содержит несколько задач? задача равно услуга?*
- Наборы
- Счета
- Инвойс на оплату работы
- Матчинг, подбора воркера под услугу [[Requirements#US-050|US-050]]. Принимает задачу и эталонный образец (клиента), а на выход выдаёт лучшего кандидата под задачу.
- Заявка в воркеры
- Набор тестов для кандидатов
- Тестирование кандидатов
- Пул воркеров
- Расходники, бланк приема работ
- Печенки, делаются подрядчиком по запросу для каждого клиента, после запроса печенька попадает на склад расходников через 10 минут и добавляется в заказ
- Отметка о начале выполнения работы воркером
- Отметка о завершении
- Бумажный отчет от клиента с отметками
- Форма качества работы
- *Гипотезы улучшения качества*  (кто их создаёт?)
- Ставки, менеджеры могут ставить на успешное/неуспешное (произвольное условие) выполнение заказов


## Processes 

Процессы разделены на две гурппы Actions and Reactions.

### Actions

Действия, которые в явном виде совершают Actors (в будущем Use Cases)

**Клиент**:

- Запрос за получение услуги [[Requirements#US-020|US-020]]
- Просмотр услуг активных и выполненных
- Просмотр списаний и зачислений для клиентов и воркеров
- Получение уведомления о

**Воркер**:

**Менеджер**:
- Задание типа услуг
- Назначение денег для воркера *Откуда деньги?* 

**Сотрудник отдела расходников**:


- НЕ ЗАВЕРШЕНО

### Reactions

Реакции совершает система. Это может быть явный ответ на Action, может быть отложенный во времени. Может быть запущен неявно, т.е. не непосредственно от Actor, а по тригеру  состояния системы (behind scene).

- *Добавление клиентов в систему из внешнего источника?* [[Requirements#US-010|US-010]]
- Еженедельное списание денег за задачи у клиента [[Requirements#US-220|US-220]]
- Ежемесяное (последний день месяца) начисление зарплаты воркеру за текущий месяц [[Requirements#US-230|US-230]] 
- Корректировка алгоритма матчинга
- НЕ ЗАВЕРШЕНО


## Questions

Список вопросов и неопределенностей в требованиях:

- Задачи, одно и тоже что и заказы? заказ содержит несколько задач? задача равно услуга?
- [[Requirements#US-160|US-160]], что значит *сами собирают на свой вкус* ?
- [[Requirements#US-290|US-290]] Откуда у менеджера деньги? Ставки совершают произвольные менеджеры, те кто хотят участвовать или это обязаловка?
- [[Requirements#US-305|US-305]] Что значит изученный случай?
- [[Requirements#US-270|US-270]] Откуда деньги у менеджера для зачисления воркеру, счет индивидуальный или общий, нужно пояснение к [[Requirements#US-280|Updated US-280]]? 
- [[Requirements#US-301|US-301]] что значит проверка, проверка кандидатов?, кто аппрувит воркеров?


# Architecture

## Notes

- Использование единого backend (монолита) Web API обеспечивающего весь функционал
- Внутри приложения организовать отдельные контексты для будущего разделения на сервисы
- Каждый контекст должен быть изолирован, взаимодействие между ними будет осуществляться через интеграционные события. Таким образом это позволит смоделировать ситуацию перехода на микросервисную архитектуры и возможно перестроить их (контексты) во время разработки, до "распила"
- Скорее всего нужно будет спрятать Web API за прокси, для реализации требования защиты от DDOS (нужно исследовать это, не было опыта)
- Специфика требует в качестве UI использовать мобильное приложение по крайней мере для воркеров (должен отсылать фотограции для проерки качества). В зависимости от ресурсов команды, нужно определиться с технологией. Например, в .NET можно использовать [MAUI](https://dotnet.microsoft.com/en-us/apps/maui), которое позволяет писать под мобильное устройство и под браузер. *Если сам UI не планируется быть  "богатым", то вполне вариант.* Можно также глянуть в сторону ботов под Telegram, тогда это решит проблему с отсылкой фоток, но хватит этого для админке менеджера?
